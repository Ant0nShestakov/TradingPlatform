@using AVS.Models.AdvertisementModels
@using AVS.Models.UserModels;
@model User;
@{
    ViewData["Title"] = "Home Page";
    int n = 5;
}

<div class="personal_info">
    <div class="personal_info_container">
        <img class="userLogo" src="https://demotivation.ru/wp-content/uploads/2020/09/vindiesel156919.jpg" />
        <p>Name</p>
    </div>
    <hr>
    <div class="pesronal_settings">
        <a href="#">Мои сообщения</a>
        <a href="#">Мои объявлеия</a>
        <a asp-controller="Advertisement" asp-action="CreateAdvertisement">Создать объявление</a>
    </div>
</div>
<div class="chats_container">
    <h1>Мои объявления</h1>
    <nav>

    </nav>
    <content>
        @{
            foreach (Advertisement advertisement in ViewBag.Advertisements)
            {
                <a href="#"> 
                <div class="chat_container">
                    <div class="userSenderLogo">
                        <img src="https://demotivation.ru/wp-content/uploads/2020/09/vindiesel156919.jpg" />
                    </div>
                    <div class="chat_discription">
                        <a href="#">@advertisement.Title</a>
                        <a href="#">@advertisement.Description</a>
                    </div>
                </div>
                </a>
            }
        }
    </content>
    <div class="pagination">
        <button class="prev_page">&laquo;</button>
        @for (int i = 0; i < ViewBag.Advertisements.Count; i++)
        {
            <span class="page_number">@(i + 1)</span>
        }
        <button class="next_page">&raquo;</button>
    </div>
</div>
@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function () {
            var currentPage = 1;
            var productsPerPage = @n;

            showProducts(currentPage);

            $('.pagination').on('click', '.page_number', function () {
                currentPage = parseInt($(this).text());
                showProducts(currentPage);
            });

            $('.pagination').on('click', '.prev_page', function () {
                if (currentPage > 1) {
                    currentPage--;
                    showProducts(currentPage);
                }
            });

            $('.pagination').on('click', '.next_page', function () {
                var numPages = Math.ceil($('.product_container').length / productsPerPage);
                if (currentPage < numPages) {
                    currentPage++;
                    showProducts(currentPage);
                }
            });

            function showProducts(page) {
                var startIndex = (page - 1) * productsPerPage;
                var endIndex = startIndex + productsPerPage;

                $('.product_container').hide();

                $('.product_container').slice(startIndex, endIndex).show();

                $('.page_number').removeClass('active');
                $('.page_number').eq(page - 1).addClass('active');
            }
        });
    </script>
}